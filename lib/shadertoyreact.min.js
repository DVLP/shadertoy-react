module.exports=function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t){e.exports=require("react")},function(e,t,r){"use strict";r.r(t);var i=r(0),a=r.n(i);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=9728,T=9729,P=33071,b=function(e){return 0==(e&e-1)},o=function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},u=function e(t){var E=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"isLoaded",!1),n(this,"url",void 0),n(this,"wrapS",void 0),n(this,"wrapT",void 0),n(this,"minFilter",void 0),n(this,"magFilter",void 0),n(this,"source",void 0),n(this,"flipY",-1),n(this,"width",0),n(this,"height",0),n(this,"_webglTexture",null),n(this,"updateTexture",function(e,t,r){var n=E.gl,o=n.RGBA,i=n.RGBA,a=n.UNSIGNED_BYTE;n.bindTexture(n.TEXTURE_2D,e),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,r),n.texImage2D(n.TEXTURE_2D,0,o,i,a,t)}),n(this,"setupVideo",function(e){var t=document.createElement("video"),r=!1,n=!1;t.autoplay=!0,t.muted=!0,t.loop=!0,t.crossOrigin="anonymous";var o=function(){r&&n&&(E.isLoaded=!0)};return t.addEventListener("playing",function(){r=!0,E.width=t.videoWidth||0,E.height=t.videoHeight||0,o()},!0),t.addEventListener("timeupdate",function(){n=!0,o()},!0),t.src=e,t}),n(this,"makePowerOfTwo",function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===E.pow2canvas&&(E.pow2canvas=document.createElement("canvas")),E.pow2canvas.width=o(e.width),E.pow2canvas.height=o(e.height),E.pow2canvas.getContext("2d").drawImage(e,0,0,E.pow2canvas.width,E.pow2canvas.height),console.warn("ShadertoyReact: Image is not power of two ".concat(e.width," x ").concat(e.height,". Resized to ").concat(E.pow2canvas.width," x ").concat(E.pow2canvas.height)),E.pow2canvas):e}),n(this,"load",function(o,e){var i=E.gl,n=o.url,t=o.wrapS,r=o.wrapT,a=o.minFilter,s=o.magFilter,u=o.flipY,c=void 0===u?-1:u;if(E.url=n,E.wrapS=t,E.wrapT=r,E.minFilter=a,E.magFilter=s,E.flipY=c,null!==l||null!==f){var l=/(\.jpg|\.jpeg|\.png|\.gif|\.bmp)$/i.exec(n),f=/(\.mp4|\.3gp|\.webm|\.ogv)$/i.exec(n);if(null!==l||null!==f){var d=i.createTexture();i.bindTexture(i.TEXTURE_2D,d);var v=i.RGBA,m=i.RGBA,h=i.UNSIGNED_BYTE,p=new Uint8Array([255,255,255,0]);if(i.texImage2D(i.TEXTURE_2D,0,v,1,1,0,m,h,p),f){var g=E.setupVideo(n);return i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),E._webglTexture=d,E.source=g,E.isVideo=!0,g.play().then(function(){return E})}return new Promise(function(e,t){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){return e(r)},r.onerror=function(){return t(new Error("failed loading url: ".concat(n)))},r.src=n}).then(function(e){var t,r,n=b(e.width)&&b(e.height);return((t=o).wrapS!==P||t.wrapT!==P||t.minFilter!==w&&t.minFilter!==T)&&!1===n&&(e=E.makePowerOfTwo(e),n=!0),i.bindTexture(i.TEXTURE_2D,d),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,c),i.texImage2D(i.TEXTURE_2D,0,v,m,h,e),r=o,n&&r.minFilter!==w&&r.minFilter!==T&&i.generateMipmap(i.TEXTURE_2D),E._webglTexture=d,E.source=e,E.isVideo=!1,E.isLoaded=!0,E.width=e.width||0,E.height=e.height||0,E})}console.error("ShadertoyReact: please upload a video or an image with a valid format",n)}else console.error("ShadertoyReact: Missing url, please make sure to pass the url of your texture { url: ... }")}),this.gl=t};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"default",function(){return d}),r.d(t,"NearestFilter",function(){return w}),r.d(t,"LinearFilter",function(){return T}),r.d(t,"NearestMipMapNearestFilter",function(){return 9984}),r.d(t,"LinearMipMapNearestFilter",function(){return 9985}),r.d(t,"NearestMipMapLinearFilter",function(){return 9986}),r.d(t,"LinearMipMapLinearFilter",function(){return 9987}),r.d(t,"ClampToEdgeWrapping",function(){return P}),r.d(t,"MirroredRepeatWrapping",function(){return 33648}),r.d(t,"RepeatWrapping",function(){return 10497});var h="attribute vec3 aVertexPosition;\nvoid main(void) {\n    gl_Position = vec4(aVertexPosition, 1.0);\n}",p="iTimeDelta",g="iResolution",E="iChannelResolution",y=function(e,t,r){return e*(1-r)+t*r},d=function(e){function o(e){var t,d,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,n=l(o).call(this,e),m(v(v(d=!n||"object"!==s(n)&&"function"!=typeof n?v(r):n)),"componentDidMount",function(){d.initWebGL();var e=d.props,t=e.fs,r=e.vs,n=e.textures,o=e.onDoneLoadingTextures,i=v(v(d)).gl;if(i){if(i.clearColor(0,0,0,1),i.clearDepth(1),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL),i.viewport(0,0,d.canvas.width,d.canvas.height),d.canvas.height=d.canvas.clientHeight,d.canvas.width=d.canvas.clientWidth,n&&0<n.length){d.uniforms["".concat(E)]={type:"vec3",isNeeded:!1,arraySize:"[".concat(n.length-1,"]"),value:[]};var a=n.map(function(e,t){return d.uniforms["".concat("iChannel").concat(t)]={type:"sampler2D",isNeeded:!1},d.texturesArr[t]=new u(i),d.texturesArr[t].load(e,t).then(function(e){return d.setupChannelRes(e,t)})});Promise.all(a).then(function(){o&&o()})}var s=d.preProcessShaders(t||"void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n    fragColor = vec4(col,1.0);\n}",r||h);d.initShaders(s),d.initBuffers(),d.drawScene(),d.addEventListeners(),d.onResize()}}),m(v(v(d)),"shouldComponentUpdate",function(){return!1}),m(v(v(d)),"setupChannelRes",function(e,t){var r=e.width,n=e.height;d.uniforms.iChannelResolution.value[3*t]=r,d.uniforms.iChannelResolution.value[3*t+1]=n,d.uniforms.iChannelResolution.value[3*t+2]=0}),m(v(v(d)),"initWebGL",function(){var e=d.props.contextAttributes;d.gl=d.canvas.getContext("webgl",e)||d.canvas.getContext("experimental-webgl",e),d.gl.getExtension("OES_standard_derivatives"),d.gl.getExtension("EXT_shader_texture_lod")}),m(v(v(d)),"initBuffers",function(){var e=v(v(d)).gl;d.squareVerticesBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,d.squareVerticesBuffer);e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW)}),m(v(v(d)),"addEventListeners",function(){d.uniforms.iMouse.isNeeded&&(d.canvas.addEventListener("mousemove",d.mouseMove),d.canvas.addEventListener("mouseout",d.mouseUp),d.canvas.addEventListener("mouseup",d.mouseUp),d.canvas.addEventListener("mousedown",d.mouseDown),d.canvas.addEventListener("touchmove",d.mouseMove),d.canvas.addEventListener("touchend",d.mouseUp)),window.addEventListener("resize",d.onResize,{passive:!0})}),m(v(v(d)),"removeEventListeners",function(){d.uniforms.iMouse.isNeeded&&(d.canvas.removeEventListener("mousemove",d.mouseMove),d.canvas.removeEventListener("mouseout",d.mouseUp),d.canvas.removeEventListener("mouseup",d.mouseUp),d.canvas.removeEventListener("mousedown",d.mouseDown),d.canvas.removeEventListener("touchmove",d.mouseMove),d.canvas.removeEventListener("touchend",d.mouseUp)),window.removeEventListener("resize",d.onResize,{passive:!0})}),m(v(v(d)),"mouseDown",function(e){d.canvasPosition=d.canvas.getBoundingClientRect();var t=(e.clientX||e.touches[0].clientX)-d.canvasPosition.left,r=d.canvasPosition.height-(e.clientY||e.touches[0].clientY)-d.canvasPosition.top;d.mousedown=!0,d.uniforms.iMouse.value[2]=t,d.uniforms.iMouse.value[3]=r,d.lastMouseArr[0]=t,d.lastMouseArr[1]=r}),m(v(v(d)),"mouseMove",function(e){var t=d.props.lerp,r=void 0===t?1:t;if(d.mousedown){var n=(e.clientX||e.touches[0].clientX)-d.canvasPosition.left,o=d.canvasPosition.height-(e.clientY||e.touches[0].clientY)-d.canvasPosition.top;1!==r?(d.lastMouseArr[0]=n,d.lastMouseArr[1]=o):(d.uniforms.iMouse.value[0]=n,d.uniforms.iMouse.value[1]=o)}}),m(v(v(d)),"mouseUp",function(e){d.mousedown=!1,d.uniforms.iMouse.value[2]=0,d.uniforms.iMouse.value[3]=0}),m(v(v(d)),"onResize",function(){var e=v(v(d)).gl,t=d.props.devicePixelRatio,r=void 0===t?1:t;d.canvasPosition=d.canvas.getBoundingClientRect();var n=r,o=Math.floor(d.canvasPosition.width*n),i=Math.floor(d.canvasPosition.height*n);if(e.canvas.width=o,e.canvas.height=i,d.uniforms.iResolution.isNeeded){var a=e.getUniformLocation(d.shaderProgram,g);e.uniform2fv(a,[e.canvas.width,e.canvas.height])}}),m(v(v(d)),"drawScene",function(e){var t=v(v(d)).gl,r=d.props.lerp,n=void 0===r?1:r;t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.bindBuffer(t.ARRAY_BUFFER,d.squareVerticesBuffer),t.vertexAttribPointer(d.vertexPositionAttribute,3,t.FLOAT,!1,0,0),d.setUniforms(e),t.drawArrays(t.TRIANGLE_STRIP,0,4),d.uniforms.iMouse.isNeeded&&1!==n&&(d.uniforms.iMouse.value[0]=y(d.uniforms.iMouse.value[0],d.lastMouseArr[0],n),d.uniforms.iMouse.value[1]=y(d.uniforms.iMouse.value[1],d.lastMouseArr[1],n)),d.animFrameId=requestAnimationFrame(d.drawScene)}),m(v(v(d)),"createShader",function(e,t){var r=v(v(d)).gl,n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){console.warn("Error compiling the shader:",t);var o=r.getShaderInfoLog(n);r.deleteShader(n),console.error("Shader compiler log: ".concat(o))}return n}),m(v(v(d)),"initShaders",function(e){var t=e.fs,r=e.vs,n=v(v(d)).gl,o=d.createShader(n.FRAGMENT_SHADER,t),i=d.createShader(n.VERTEX_SHADER,r);d.shaderProgram=n.createProgram(),n.attachShader(d.shaderProgram,i),n.attachShader(d.shaderProgram,o),n.linkProgram(d.shaderProgram),n.getProgramParameter(d.shaderProgram,n.LINK_STATUS)?(n.useProgram(d.shaderProgram),d.vertexPositionAttribute=n.getAttribLocation(d.shaderProgram,"aVertexPosition"),n.enableVertexAttribArray(d.vertexPositionAttribute)):console.error("Unable to initialize the shader program: ".concat(n.getProgramInfoLog(d.shaderProgram)))}),m(v(v(d)),"preProcessShaders",function(o,e){var i="#ifdef GL_ES\n    precision highp float;\n#endif\n".concat(o).replace(/texture\(/g,"texture2D("),a=i.lastIndexOf("#endif");return Object.keys(d.uniforms).forEach(function(e){var t,r,n;o.includes(e)&&(t=i,r="uniform ".concat(d.uniforms[e].type," ").concat(e).concat(d.uniforms[e].arraySize||"","; \n"),i=0<(n=a+"#endif".length+1)?t.substring(0,n)+r+t.substring(n,t.length):r+t,d.uniforms[e].isNeeded=!0)}),{fs:i=i.concat("\nvoid main(void){\n    vec4 color = vec4(0.0,0.0,0.0,1.0);\n    mainImage( color, gl_FragCoord.xy );\n    gl_FragColor = color;\n}"),vs:e}}),m(v(v(d)),"setUniforms",function(e){var s=v(v(d)).gl,t=d.lastTime?(e-d.lastTime)/1e3:0;if(d.lastTime=e,d.uniforms.iMouse.isNeeded){var r=s.getUniformLocation(d.shaderProgram,"iMouse");s.uniform4fv(r,[d.uniforms.iMouse.value[0],d.uniforms.iMouse.value[1],d.uniforms.iMouse.value[2],d.uniforms.iMouse.value[3]])}if(d.uniforms.iChannelResolution&&d.uniforms.iChannelResolution.isNeeded){var n=s.getUniformLocation(d.shaderProgram,E);s.uniform3fv(n,d.uniforms.iChannelResolution.value)}if(d.uniforms.iTime.isNeeded){var o=s.getUniformLocation(d.shaderProgram,"iTime");s.uniform1f(o,d.timer+=t)}if(d.uniforms.iTimeDelta.isNeeded){s.getUniformLocation(d.shaderProgram,p);s.uniform1f(timeUniform,t)}if(d.uniforms.iDate.isNeeded){var i=new Date,a=i.getMonth()+1,u=i.getDate(),c=i.getFullYear(),l=60*i.getHours()*60+60*i.getMinutes()+i.getSeconds(),f=s.getUniformLocation(d.shaderProgram,"iDate");s.uniform4fv(f,[c,a,u,l])}if(d.uniforms.iFrame.isNeeded){s.getUniformLocation(d.shaderProgram,"iFrame");s.uniform1f(timeUniform,d.uniforms.iFrame.value++)}0<d.texturesArr.length&&d.texturesArr.forEach(function(e,t){var r=e.isVideo,n=e._webglTexture,o=e.source,i=e.flipY;if(e.isLoaded&&d.uniforms["iChannel".concat(t)].isNeeded){var a=s.getUniformLocation(d.shaderProgram,"iChannel".concat(t));s.activeTexture(s["TEXTURE".concat(t)]),s.bindTexture(s.TEXTURE_2D,n),s.uniform1i(a,t),r&&e.updateTexture(n,o,i)}})}),m(v(v(d)),"registerCanvas",function(e){d.canvas=e}),m(v(v(d)),"gl",void 0),m(v(v(d)),"squareVerticesBuffer",void 0),m(v(v(d)),"shaderProgram",void 0),m(v(v(d)),"vertexPositionAttribute",void 0),m(v(v(d)),"animFrameId",void 0),m(v(v(d)),"timeoutId",void 0),m(v(v(d)),"canvas",void 0),m(v(v(d)),"mousedown",!1),m(v(v(d)),"canvasPosition",void 0),m(v(v(d)),"timer",0),m(v(v(d)),"lastMouseArr",[0,0]),m(v(v(d)),"texturesArr",[]),m(v(v(d)),"lastTime",0),m(v(v(d)),"render",function(){var e={glCanvas:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){m(t,e,r[e])})}return t}({position:"absolute",height:"100%",width:"100%"},d.props.style)};return a.a.createElement("canvas",{style:e.glCanvas,ref:d.registerCanvas})}),d.uniforms=(m(t={},"iTime",{type:"float",isNeeded:!1,value:0}),m(t,p,{type:"float",isNeeded:!1,value:0}),m(t,"iDate",{type:"vec4",isNeeded:!1,value:[0,0,0,0]}),m(t,"iMouse",{type:"vec4",isNeeded:!1,value:[0,0,0,0]}),m(t,g,{type:"vec2",isNeeded:!1,value:[0,0]}),m(t,"iFrame",{type:"int",isNeeded:!1,value:0}),t),d}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,i["Component"]),t=o,(r=[{key:"componentWillUnmount",value:function(){var t=this.gl;t&&(t.getExtension("WEBGL_lose_context").loseContext(),t.useProgram(null),t.deleteProgram(this.shaderProgram),0<this.texturesArr.length&&this.texturesArr.forEach(function(e){t.deleteTexture(e.webglTexture)}),this.shaderProgram=null),this.removeEventListeners(),cancelAnimationFrame(this.animFrameId)}}])&&c(t.prototype,r),n&&c(t,n),o}();m(d,"defaultProps",{textures:[],contextAttributes:{premultipliedAlpha:!1,alpha:!0},devicePixelRatio:1,vs:h})}]);