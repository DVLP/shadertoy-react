module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){return 0==(e&e-1)},s=function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},u=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"isLoaded",!1),i(this,"url",void 0),i(this,"wrapS",void 0),i(this,"wrapT",void 0),i(this,"minFilter",void 0),i(this,"magFilter",void 0),i(this,"source",void 0),i(this,"flipY",-1),i(this,"width",0),i(this,"height",0),i(this,"_webglTexture",null),i(this,"updateTexture",function(e,t,r){var o=n.gl,i=o.RGBA,a=o.RGBA,s=o.UNSIGNED_BYTE;o.bindTexture(o.TEXTURE_2D,e),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,r),o.texImage2D(o.TEXTURE_2D,0,i,a,s,t)}),i(this,"setupVideo",function(e){var t=document.createElement("video"),r=!1,o=!1;t.autoplay=!0,t.muted=!0,t.loop=!0,t.crossOrigin="anonymous";var i=function(){r&&o&&(n.isLoaded=!0)};return t.addEventListener("playing",function(){r=!0,n.width=t.videoWidth||0,n.height=t.videoHeight||0,i()},!0),t.addEventListener("timeupdate",function(){o=!0,i()},!0),t.src=e,t}),i(this,"makePowerOfTwo",function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===n.pow2canvas&&(n.pow2canvas=document.createElement("canvas")),n.pow2canvas.width=s(e.width),n.pow2canvas.height=s(e.height),n.pow2canvas.getContext("2d").drawImage(e,0,0,n.pow2canvas.width,n.pow2canvas.height),console.warn("ShadertoyReact: Image is not power of two ".concat(e.width," x ").concat(e.height,". Resized to ").concat(n.pow2canvas.width," x ").concat(n.pow2canvas.height)),n.pow2canvas):e}),i(this,"load",function(e,t){var r=n.gl,o=e.url,i=e.wrapS,s=e.wrapT,u=e.minFilter,c=e.magFilter,l=e.flipY,f=void 0===l?-1:l;if(n.url=o,n.wrapS=i,n.wrapT=s,n.minFilter=u,n.magFilter=c,n.flipY=f,null!==d||null!==v){var d=/(\.jpg|\.jpeg|\.png|\.gif|\.bmp)$/i.exec(o),v=/(\.mp4|\.3gp|\.webm|\.ogv)$/i.exec(o);if(null!==d||null!==v){var m=r.createTexture();r.bindTexture(r.TEXTURE_2D,m);var h=r.RGBA,p=r.RGBA,g=r.UNSIGNED_BYTE,E=new Uint8Array([255,255,255,0]);if(r.texImage2D(r.TEXTURE_2D,0,h,1,1,0,p,g,E),v){var w=n.setupVideo(o);return r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),n._webglTexture=m,n.source=w,n.isVideo=!0,w.play().then(function(){return n})}return new Promise(function(e,t){var n=new Image;n.crossOrigin="anonymous",n.onload=function(){return e(n)},n.onerror=function(){return t(new Error("failed loading url: ".concat(o)))},n.src=o}).then(function(t){var o=a(t.width)&&a(t.height);return function(e){return 33071!==e.wrapS||33071!==e.wrapT||9728!==e.minFilter&&9729!==e.minFilter}(e)&&!1===o&&(t=n.makePowerOfTwo(t),o=!0),r.bindTexture(r.TEXTURE_2D,m),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,f),r.texImage2D(r.TEXTURE_2D,0,h,p,g,t),function(e,t){return t&&9728!==e.minFilter&&9729!==e.minFilter}(e,o)&&r.generateMipmap(r.TEXTURE_2D),n._webglTexture=m,n.source=t,n.isVideo=!1,n.isLoaded=!0,n.width=t.width||0,n.height=t.height||0,n})}console.error("ShadertoyReact: please upload a video or an image with a valid format",o)}else console.error("ShadertoyReact: Missing url, please make sure to pass the url of your texture { url: ... }")}),this.gl=t};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return S}),n.d(t,"NearestFilter",function(){return 9728}),n.d(t,"LinearFilter",function(){return 9729}),n.d(t,"NearestMipMapNearestFilter",function(){return 9984}),n.d(t,"LinearMipMapNearestFilter",function(){return 9985}),n.d(t,"NearestMipMapLinearFilter",function(){return 9986}),n.d(t,"LinearMipMapLinearFilter",function(){return 9987}),n.d(t,"ClampToEdgeWrapping",function(){return 33071}),n.d(t,"MirroredRepeatWrapping",function(){return 33648}),n.d(t,"RepeatWrapping",function(){return 10497});var h="#ifdef GL_ES\n    precision highp float;\n#endif\n",p="\nvoid main(void){\n    vec4 color = vec4(0.0,0.0,0.0,1.0);\n    mainImage( color, gl_FragCoord.xy );\n    gl_FragColor = color;\n}",g="void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    vec2 uv = fragCoord/iResolution.xy;\n    vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));\n    fragColor = vec4(col,1.0);\n}",E="attribute vec3 aVertexPosition;\nvoid main(void) {\n    gl_Position = vec4(aVertexPosition, 1.0);\n}",w="iTime",T="iTimeDelta",P="iDate",b="iFrame",y="iMouse",x="iResolution",_="iChannel",R="iChannelResolution",L=function(e,t,n){return e*(1-n)+t*n},M=function(e,t,n){return n>0?e.substring(0,n)+t+e.substring(n,e.length):t+e},S=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(v(v(r=function(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}(this,f(t).call(this,e)))),"componentDidMount",function(){r.initWebGL();var e=r.props,t=e.fs,n=e.vs,o=e.textures,i=e.onDoneLoadingTextures,a=v(v(r)).gl;if(a){if(a.clearColor(0,0,0,1),a.clearDepth(1),a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL),a.viewport(0,0,r.canvas.width,r.canvas.height),r.canvas.height=r.canvas.clientHeight,r.canvas.width=r.canvas.clientWidth,o&&o.length>0){r.uniforms["".concat(R)]={type:"vec3",isNeeded:!1,arraySize:"[".concat(o.length-1,"]"),value:[]};var s=o.map(function(e,t){return r.uniforms["".concat(_).concat(t)]={type:"sampler2D",isNeeded:!1},r.texturesArr[t]=new u(a),r.texturesArr[t].load(e,t).then(function(e){return r.setupChannelRes(e,t)})});Promise.all(s).then(function(){i&&i()})}var c=r.preProcessShaders(t||g,n||E);r.initShaders(c),r.initBuffers(),r.drawScene(),r.addEventListeners(),r.onResize()}}),m(v(v(r)),"shouldComponentUpdate",function(){return!1}),m(v(v(r)),"setupChannelRes",function(e,t){var n=e.width,o=e.height;r.uniforms.iChannelResolution.value[3*t]=n,r.uniforms.iChannelResolution.value[3*t+1]=o,r.uniforms.iChannelResolution.value[3*t+2]=0}),m(v(v(r)),"initWebGL",function(){var e=r.props.contextAttributes;r.gl=r.canvas.getContext("webgl",e)||r.canvas.getContext("experimental-webgl",e),r.gl.getExtension("OES_standard_derivatives"),r.gl.getExtension("EXT_shader_texture_lod")}),m(v(v(r)),"initBuffers",function(){var e=v(v(r)).gl;r.squareVerticesBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r.squareVerticesBuffer);e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),e.STATIC_DRAW)}),m(v(v(r)),"addEventListeners",function(){r.uniforms.iMouse.isNeeded&&(r.canvas.addEventListener("mousemove",r.mouseMove),r.canvas.addEventListener("mouseout",r.mouseUp),r.canvas.addEventListener("mouseup",r.mouseUp),r.canvas.addEventListener("mousedown",r.mouseDown),r.canvas.addEventListener("touchmove",r.mouseMove),r.canvas.addEventListener("touchend",r.mouseUp)),window.addEventListener("resize",r.onResize,{passive:!0})}),m(v(v(r)),"removeEventListeners",function(){r.uniforms.iMouse.isNeeded&&(r.canvas.removeEventListener("mousemove",r.mouseMove),r.canvas.removeEventListener("mouseout",r.mouseUp),r.canvas.removeEventListener("mouseup",r.mouseUp),r.canvas.removeEventListener("mousedown",r.mouseDown),r.canvas.removeEventListener("touchmove",r.mouseMove),r.canvas.removeEventListener("touchend",r.mouseUp)),window.removeEventListener("resize",r.onResize,{passive:!0})}),m(v(v(r)),"mouseDown",function(e){r.canvasPosition=r.canvas.getBoundingClientRect();var t=(e.clientX||e.touches[0].clientX)-r.canvasPosition.left,n=r.canvasPosition.height-(e.clientY||e.touches[0].clientY)-r.canvasPosition.top;r.mousedown=!0,r.uniforms.iMouse.value[2]=t,r.uniforms.iMouse.value[3]=n,r.lastMouseArr[0]=t,r.lastMouseArr[1]=n}),m(v(v(r)),"mouseMove",function(e){var t=r.props.lerp,n=void 0===t?1:t;if(r.mousedown){var o=(e.clientX||e.touches[0].clientX)-r.canvasPosition.left,i=r.canvasPosition.height-(e.clientY||e.touches[0].clientY)-r.canvasPosition.top;1!==n?(r.lastMouseArr[0]=o,r.lastMouseArr[1]=i):(r.uniforms.iMouse.value[0]=o,r.uniforms.iMouse.value[1]=i)}}),m(v(v(r)),"mouseUp",function(e){r.mousedown=!1,r.uniforms.iMouse.value[2]=0,r.uniforms.iMouse.value[3]=0}),m(v(v(r)),"onResize",function(){var e=v(v(r)).gl,t=r.props.devicePixelRatio,n=void 0===t?1:t;r.canvasPosition=r.canvas.getBoundingClientRect();var o=n,i=Math.floor(r.canvasPosition.width*o),a=Math.floor(r.canvasPosition.height*o);if(e.canvas.width=i,e.canvas.height=a,r.uniforms.iResolution.isNeeded){var s=e.getUniformLocation(r.shaderProgram,x);e.uniform2fv(s,[e.canvas.width,e.canvas.height])}}),m(v(v(r)),"drawScene",function(e){var t=v(v(r)).gl,n=r.props.lerp,o=void 0===n?1:n;t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.bindBuffer(t.ARRAY_BUFFER,r.squareVerticesBuffer),t.vertexAttribPointer(r.vertexPositionAttribute,3,t.FLOAT,!1,0,0),r.setUniforms(e),t.drawArrays(t.TRIANGLE_STRIP,0,4),r.uniforms.iMouse.isNeeded&&1!==o&&(r.uniforms.iMouse.value[0]=L(r.uniforms.iMouse.value[0],r.lastMouseArr[0],o),r.uniforms.iMouse.value[1]=L(r.uniforms.iMouse.value[1],r.lastMouseArr[1],o)),r.animFrameId=requestAnimationFrame(r.drawScene)}),m(v(v(r)),"createShader",function(e,t){var n=v(v(r)).gl,o=n.createShader(e);if(n.shaderSource(o,t),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS)){console.warn("Error compiling the shader:",t);var i=n.getShaderInfoLog(o);n.deleteShader(o),console.error("Shader compiler log: ".concat(i))}return o}),m(v(v(r)),"initShaders",function(e){var t=e.fs,n=e.vs,o=v(v(r)).gl,i=r.createShader(o.FRAGMENT_SHADER,t),a=r.createShader(o.VERTEX_SHADER,n);r.shaderProgram=o.createProgram(),o.attachShader(r.shaderProgram,a),o.attachShader(r.shaderProgram,i),o.linkProgram(r.shaderProgram),o.getProgramParameter(r.shaderProgram,o.LINK_STATUS)?(o.useProgram(r.shaderProgram),r.vertexPositionAttribute=o.getAttribLocation(r.shaderProgram,"aVertexPosition"),o.enableVertexAttribArray(r.vertexPositionAttribute)):console.error("Unable to initialize the shader program: ".concat(o.getProgramInfoLog(r.shaderProgram)))}),m(v(v(r)),"preProcessShaders",function(e,t){var n=h.concat(e).replace(/texture\(/g,"texture2D("),o=n.lastIndexOf("#endif");return Object.keys(r.uniforms).forEach(function(t){e.includes(t)&&(n=M(n,"uniform ".concat(r.uniforms[t].type," ").concat(t).concat(r.uniforms[t].arraySize||"","; \n"),o+"#endif".length+1),r.uniforms[t].isNeeded=!0)}),{fs:n=n.concat(p),vs:t}}),m(v(v(r)),"setUniforms",function(e){var t=v(v(r)).gl,n=r.lastTime?(e-r.lastTime)/1e3:0;if(r.lastTime=e,r.uniforms.iMouse.isNeeded){var o=t.getUniformLocation(r.shaderProgram,y);t.uniform4fv(o,[r.uniforms.iMouse.value[0],r.uniforms.iMouse.value[1],r.uniforms.iMouse.value[2],r.uniforms.iMouse.value[3]])}if(r.uniforms.iChannelResolution&&r.uniforms.iChannelResolution.isNeeded){var i=t.getUniformLocation(r.shaderProgram,R);t.uniform3fv(i,r.uniforms.iChannelResolution.value)}if(r.uniforms.iTime.isNeeded){var a=t.getUniformLocation(r.shaderProgram,w);t.uniform1f(a,r.timer+=n)}if(r.uniforms.iTimeDelta.isNeeded){t.getUniformLocation(r.shaderProgram,T);t.uniform1f(timeUniform,n)}if(r.uniforms.iDate.isNeeded){var s=new Date,u=s.getMonth()+1,c=s.getDate(),l=s.getFullYear(),f=60*s.getHours()*60+60*s.getMinutes()+s.getSeconds(),d=t.getUniformLocation(r.shaderProgram,P);t.uniform4fv(d,[l,u,c,f])}if(r.uniforms.iFrame.isNeeded){t.getUniformLocation(r.shaderProgram,b);t.uniform1f(timeUniform,r.uniforms.iFrame.value++)}r.texturesArr.length>0&&r.texturesArr.forEach(function(e,n){var o=e.isVideo,i=e._webglTexture,a=e.source,s=e.flipY;if(e.isLoaded&&r.uniforms["iChannel".concat(n)].isNeeded){var u=t.getUniformLocation(r.shaderProgram,"iChannel".concat(n));t.activeTexture(t["TEXTURE".concat(n)]),t.bindTexture(t.TEXTURE_2D,i),t.uniform1i(u,n),o&&e.updateTexture(i,a,s)}})}),m(v(v(r)),"registerCanvas",function(e){r.canvas=e}),m(v(v(r)),"gl",void 0),m(v(v(r)),"squareVerticesBuffer",void 0),m(v(v(r)),"shaderProgram",void 0),m(v(v(r)),"vertexPositionAttribute",void 0),m(v(v(r)),"animFrameId",void 0),m(v(v(r)),"timeoutId",void 0),m(v(v(r)),"canvas",void 0),m(v(v(r)),"mousedown",!1),m(v(v(r)),"canvasPosition",void 0),m(v(v(r)),"timer",0),m(v(v(r)),"lastMouseArr",[0,0]),m(v(v(r)),"texturesArr",[]),m(v(v(r)),"lastTime",0),m(v(v(r)),"render",function(){var e={glCanvas:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({position:"absolute",height:"100%",width:"100%"},r.props.style)};return o.a.createElement("canvas",{style:e.glCanvas,ref:r.registerCanvas})}),r.uniforms=(m(n={},w,{type:"float",isNeeded:!1,value:0}),m(n,T,{type:"float",isNeeded:!1,value:0}),m(n,P,{type:"vec4",isNeeded:!1,value:[0,0,0,0]}),m(n,y,{type:"vec4",isNeeded:!1,value:[0,0,0,0]}),m(n,x,{type:"vec2",isNeeded:!1,value:[0,0]}),m(n,b,{type:"int",isNeeded:!1,value:0}),n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"componentWillUnmount",value:function(){var e=this.gl;e&&(e.getExtension("WEBGL_lose_context").loseContext(),e.useProgram(null),e.deleteProgram(this.shaderProgram),this.texturesArr.length>0&&this.texturesArr.forEach(function(t){e.deleteTexture(t.webglTexture)}),this.shaderProgram=null),this.removeEventListeners(),cancelAnimationFrame(this.animFrameId)}}]),t}();m(S,"defaultProps",{textures:[],contextAttributes:{premultipliedAlpha:!1,alpha:!0},devicePixelRatio:1,vs:E})}]);